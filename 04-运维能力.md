# 运维能力矩阵（能力项 → 证据 → 题库 → 参考）

> 用途：把“学了什么”转为“能交付什么”。  
> 本文件不追求把所有技术点列全，而是定义 **小企业日常运维** 的最小能力集合，并映射到：  
> 1) 需要产出的证据（SOP/Runbook/记录/脚本）  
> 2) 需要通过的题库/演练  
> 3) 推荐参考资料（书/官方文档/man）

---

## 0. 熟练度等级（统一口径）
- **K（Know）**：理解概念与边界，能读懂输出/配置
- **O（Operate）**：能在 Checklist/SOP 指导下完成操作（不追求优化）
- **Ow（Own）**：能独立完成常规工作，遇到问题能定位方向并恢复
- **A（Automate）**：能把稳定流程脚本化/自动化（先只读后行动）

---

## 1. 能力域总览（小企业单机模拟）
### 1.1 IAM（账号/权限/审计）
**能力点**
- 账号生命周期：入职/变更/离职（含 SSH key 发放与回收）
- 组与目录权限矩阵（最小权限）
- sudo 策略（最小授权 + 审计）

**最低等级**
- 关键能力达到 **Ow**：能独立完成且零越权、零遗漏

**证据（必须产物）**
- `docs/SOP/IAM.md`
- `docs/POLICIES/sudo-policy.md`
- `docs/CHECKLIST/iam.md`
- 权限矩阵：`docs/POLICIES/permission-map.md`

**题库映射**
- `故障排查肌肉记忆.md`：D1、D2

---

### 1.2 Service Ops（systemd/进程/发布回滚）
**能力点**
- 用 systemd 托管应用：自启、日志、环境变量、资源限制、依赖
- 发布与回滚：配置回退、版本回退、健康检查

**最低等级**
- 关键能力达到 **Ow**

**证据**
- `docs/SOP/release.md`
- `docs/RUNBOOK/systemd.md`
- `docs/CHECKLIST/release.md`

**题库映射**
- A3、A4、D1

---

### 1.3 Web（Nginx/TLS）
**能力点**
- Nginx 反向代理基础：upstream、超时、日志
- TLS 证书轮换与到期预警（单机模拟）

**最低等级**
- 达到 **O**（能按 Runbook 处理），常见事故达到 **Ow**

**证据**
- `docs/RUNBOOK/nginx-502.md`
- `docs/SOP/tls-rotation.md`
- `docs/CHECKLIST/web.md`

**题库映射**
- A2、F1

---

### 1.4 数据库基础运维（PostgreSQL/MySQL 二选一）
**能力点**
- 权限最小化、连接问题定位（简化）
- 备份与恢复（可证明可恢复）

**最低等级**
- 备份恢复达到 **Ow**；其余达到 **O**

**证据**
- `docs/SOP/db-backup-restore.md`
- `reports/backups/*.md`

**题库映射**
- E2（恢复演练可扩展到 DB）

---

### 1.5 备份与恢复（Backup/DR）
**能力点**
- 备份策略：频率/保留/校验/演练
- 恢复演练：误删文件、误改配置、数据恢复（含验证）

**最低等级**
- 达到 **Ow**（必须能在时间盒内恢复并证明可用）

**证据**
- `docs/SOP/backup.md`
- `docs/RUNBOOK/restore.md`
- `reports/backups/*.md`

**题库映射**
- E1、E2

---

### 1.6 巡检与可观测性（Inspection/Observability）
**能力点**
- 日巡检/周巡检：资源、日志、备份、证书、账号变更、计划任务
- 告警响应：按统一框架收敛假设与恢复

**最低等级**
- 达到 **Ow**（能稳定输出一致格式，并能发现趋势性风险）

**证据**
- `docs/CHECKLIST/daily.md`
- `docs/CHECKLIST/weekly.md`
- `reports/inspections/*.md`
- `docs/SOP/alert-response.md`

**题库映射**
- B1、B2、B3、E1、F1

---

### 1.7 排障与事件管理（Incident）
**能力点**
- 统一排障框架：资源/状态/队列/边界 → 假设→验证→最小修复→回滚→复盘
- 事件记录与复盘资产化（Runbook/Checklist 修订）

**最低等级**
- 达到 **Ow**；具备向 **A** 演进的素材（判定树化、只读自动化）

**证据**
- `docs/SOP/incident.md`
- `reports/incidents/*.md`
- `docs/RUNBOOK/*`（每类事故一页）

**题库映射**
- 全部（A–F）

---

## 2. 验收矩阵（建议作为最终考核口径）
> 可在 Exam 域执行：题目未知、初始状态固定、时间盒明确。

- **IAM**：5 场景零越权、零遗漏、可复盘（Ow）
- **发布与回滚**：3 次演练至少 1 次回滚成功（Ow）
- **排障**：10 题 ≥8 题在时间盒内恢复（Ow）
- **备份恢复**：至少 2 次完整恢复并证明可用（Ow）
- **巡检**：连续 2 周记录一致，发现并解决 ≥3 类趋势问题（Ow）

---

## 3. 从“训练”到“自动化”（成熟度要求）
- 达到 **Ow** 后才能进入 **A**
- 自动化顺序必须是：判定树化 → 只读自动化 → 有限自动行动  
（详见《ubuntu训练计划.md》的“自动化演进”章节）

---

## 4. 推荐参考（最少集）
- 《Unix/Linux 系统管理技术手册》：方法论与管理原则（原则层）
- Ubuntu 官方文档 + man pages：systemd、OpenSSH、权限、日志（事实层）
- 组件官方文档：Nginx、PostgreSQL/MySQL、备份工具（事实层）
- 你自己的 Runbook/SOP/复盘：情景层资产（越写越值钱）

# 文档与证据命名规范（命名规范）

## 1. 目的与适用范围
本规范用于统一运维资产（制度/流程/清单/报告/演练/脚本）的文件命名方式，确保资产可审计、可检索、可交接、可自动化处理。
适用于本仓库所有目录，尤其是 `5-reports/`、`2-labs/`、`1-docs/`、`4-scripts/`。

## 2. 总体原则
1. **事实化时间**：文件名使用日期/编号表达“发生时间”，不使用“第几天”等阶段性词汇。
2. **可脱离上下文理解**：文件名包含对象与文档类型，读者无需打开文件即可判断用途。
3. **稳定可扩展**：同类文件可无限追加，不依赖“latest/final”等临时标识。
4. **审计友好**：变更、发布、备份恢复等必须能回溯到批准/执行/验证/结论。

## 3. 禁用词与反例
### 3.1 禁用词
- `day1/day2/day3`
- `final/latest/new/old/tmp/test`
- `v1/v2`（仅靠版本号而无日期或编号）
- 含糊时间：`today/yesterday/thisweek`

### 3.2 反例
- `backup_restore_day2.md`
- `release_final.md`
- `daily_latest.md`

## 4. 标准命名格式
### 4.1 日期格式
- 统一使用：`YYYYMMDD`（例如 `20260113`）
- 同日多次：追加序号 `-01/-02/...`

### 4.2 通用格式（推荐）
- 报告/记录/清单输出：
  - `<scope>-<doctype>-<YYYYMMDD>[-<seq>].md`
- 变更/发布（可选附加摘要或版本）：
  - `<doctype>-<YYYYMMDD>[-<seq>]-<system>[-<summary_or_version>].md`

字段说明：
- `scope`：`infra`、`mattermost`、`nginx`、`postgresql` 等
- `doctype`：见第 5 节分类
- `seq`：两位数字序号，01 起
- `summary_or_version`：简短可读，不超过 30 字符；仅用小写字母/数字/短横线（如需英文）

## 5. 分类命名规则（按目录）
### 5.1 制度与流程（`1-docs/`）
- **POLICIES**：使用语义化文件名（不带日期）
  - `service-catalog.md`
  - `permission-map.md`
- **SOP / CHECKLIST / RUNBOOK**：使用语义化文件名（不带日期）
  - `IAM.md`、`backup.md`、`restore.md`、`change.md`、`release.md`
  - `daily.md`、`iam.md`、`incident_L1.md`

> 说明：制度类是“长期稳定资产”，通过 Git 历史体现时间变化，不在文件名引入日期。

### 5.2 证据与报告（`5-reports/`）
#### 5.2.1 巡检（`5-reports/inspections/`）
- 日巡检：
  - `infra-daily-inspection-YYYYMMDD.md`
- 专项核查（权限、基线、组件上线验收等）：
  - `<system>-verification-YYYYMMDD[-seq].md`
  - 示例：`mattermost-permission-verification-20260113.md`

#### 5.2.2 备份与恢复（`5-reports/backups/`）
- 备份与恢复演练（必须含验证证据）：
  - `<system>-backup-restore-YYYYMMDD[-seq].md`
  - 示例：`mattermost-backup-restore-20260113-01.md`
- 备份作业执行记录（如单独留痕）：
  - `<system>-backup-run-YYYYMMDD[-seq].md`

#### 5.2.3 事件与演练记录（`5-reports/incidents/`）
- 演练（模拟事故）：
  - `incident-sim-YYYYMMDD[-seq]-<system>-<scenario>.md`
  - 示例：`incident-sim-20260113-01-nginx-502.md`
- 真实事故（如未来需要）：
  - `incident-prod-YYYYMMDD[-seq]-<system>-<symptom>.md`

### 5.3 演练脚本与场景（`2-labs/`）
- 注入脚本（`2-labs/inject/`）：
  - `S<NN>_<short_name>.sh`
  - 示例：`S01_cpu_burn.sh`、`S02_stop_app.sh`
- 重置脚本（`2-labs/reset/`）：
  - `reset.sh`（固定）
- 场景说明（`2-labs/scenarios/`）：
  - `SC<NN>_<scenario_name>.md`
  - 示例：`SC01_nginx_502.md`

> 说明：演练脚本以编号表达顺序与可扩展性；报告以日期表达发生时间。

### 5.4 自动化脚本（`4-scripts/`）
- 以动作命名，不带日期：
  - `backup_mattermost.sh`
  - `restore_mattermost.sh`
  - `daily_inspection.sh`
  - `collect_baseline.sh`

## 6. 变更与发布记录命名（重点）
### 6.1 变更记录（推荐）
- `change-record-YYYYMMDD[-seq]-<system>-<summary>.md`
- 示例：`change-record-20260113-01-nginx-timeout-tuning.md`

### 6.2 发布与回滚记录（推荐）
- `release-record-YYYYMMDD[-seq]-<system>-<version>.md`
- 如含回滚：
  - `release-rollback-YYYYMMDD[-seq]-<system>-<version>.md`

## 7. 最小必备字段建议（用于报告模板）
为保证审计可用性，以下类型报告建议至少包含：
- **Who**：执行人与审批人（可模拟角色：it-admin、reviewer）
- **When**：开始/结束时间
- **What**：目标与范围
- **How**：步骤与命令（可脱敏）
- **Verify**：验证点与结果（含关键输出/截图说明）
- **Rollback/Restore**：回滚或恢复路径
- **Evidence**：日志路径、校验和、链接或附件清单
- **Conclusion**：结论与后续行动项

## 8. 示例速查
- `infra-daily-inspection-20260113.md`
- `mattermost-backup-restore-20260113-01.md`
- `change-record-20260113-01-nginx-timeout-tuning.md`
- `release-record-20260113-01-mattermost-v9.3.1.md`
- `incident-sim-20260113-01-nginx-502.md`


